"use strict";angular.module("app",["ngAnimate","ngMaterial","ngMessages","ui.router"]),function(){function t(t,i,e){this.$scope=t,this.$http=i,this.config=e,this.init()}t.$inject=["$scope","$http","configFactory"],angular.module("app").controller("mainCtrl",t),t.prototype.init=function(){var t=this;this.$http.get(this.config.fixtures+"countries.json").then(function(i){t.countries=i.data,t.cNum=0}),this.$http.get(this.config.fixtures+"otherinfo.json").then(function(i){t.info2=i.data,t.iNum=0})},t.prototype.setCountry=function(t,i){t.preventDefault(),this.cNum=i},t.prototype.setInfo2Item=function(t,i){t.preventDefault(),this.iNum=i},t.prototype.callbackClick=function(t){console.log("---=== item ===---",t)}}(),function(){angular.module("app").factory("configFactory",function(){var t={fixtures:"./src/fixtures/",components:"./src/components/"};return{fixtures:t.fixtures,components:t.components}})}(),function(){angular.module("app").factory("ngDgPresetsFactory",function(){var t=500,i=500,e={pathColors:{0:"#f58a41",1:"#f0d367",2:"#e64d1b"},svgWidth:t,svgHeight:i,svgStyles:{width:t,height:i,fill:"blue"},radius:155,animateTime:500,animateStep:1,sRadius:30};return{pathColors:e.pathColors,svgWidth:e.svgWidth,svgHeight:e.svgHeight,svgStyles:e.svgStyles,radius:e.radius,animateTime:e.animateTime,animateStep:e.animateStep,sRadius:e.sRadius}})}(),function(){angular.module("app").config(["$stateProvider","$urlRouterProvider",function(t,i){var e="./src/components/";i.otherwise("/");var n={main:{templateUrl:e+"main/index.html"}};t.state("home",{url:"/",views:n})}])}(),function(){function t(t,i){this.$scope=t,this.pathClick||(this.pathClick=function(){console.log("Коллбек по клику не задан")}),this.prs=i,this.init()}t.$inject=["$scope","ngDgPresetsFactory"],angular.module("app").controller("ngDiagrammCtrl",t),angular.module("app").directive("ngDiagramm",["configFactory",function(i){function e(t,i,e){}var n="ngDiagramm";return{link:e,scope:{},templateUrl:i.components+n+"/"+n+".html",controller:t,controllerAs:"dg",bindToController:{data:"=?",styles:"=?",width:"@?",height:"@?",radius:"@?",stepRadius:"@?",pathClickCb:"=?",ctx:"=?",name:"@?"}}}]),t.prototype.init=function(){var t=this;this.pathes=[],this.circles=[];var i={width:+this.width||this.prs.svgWidth,height:+this.height||this.prs.svgHeight,radius:+this.radius||this.prs.radius,sRadius:+this.stepRadius||this.prs.sRadius,center:{x:(+this.width||this.prs.svgWidth)/2,y:(+this.height||this.prs.svgHeight)/2}};this.$scope.$watch(function(){return t.data},function(e){if(e){t.pathes&&t.pathes.length&&(t.pathes.length=0),t.circles.length||t.createCircles(i);var n=[],a=[];for(var s in e.data)n.push({value:e.data[s].value,text:e.data[s].text});for(var r=0,o=0;o<n.length;o+=1){for(var u=0,c=0;c<n.length;c+=1)n[o].value<n[c].value&&(u+=1);a.push({a1:3.6*r,a2:3.6*(r+n[o].value),text:n[o].text,value:n[o].value,sRadius:u}),r+=n[o].value}for(var h=0;h<a.length;h+=1){var l={x1:"",y1:"",x2:"",y2:""},p=t.calculateAbsCoord(a[h].a1,i.center,i.radius-a[h].sRadius*i.sRadius);l.x1=p[0],l.y1=p[1],p=t.calculateAbsCoord(a[h].a2,i.center,i.radius-a[h].sRadius*i.sRadius),l.x2=p[0],l.y2=p[1];for(var g in l)l[g]=Math.round(l[g]);var d=t.calculateAbsCoord((a[h].a1+a[h].a2)/2,i.center,(i.radius-h*i.sRadius)/2),f={id:"g_"+(h+1),color:t.prs.pathColors[a[h].sRadius],value:a[h].value,text:a[h].text,radius:i.radius-a[h].sRadius*i.sRadius,showTooltip:!1,angle:{start:a[h].a1,end:a[h].a2},startPos:{x:l.x1,y:l.y1},endPos:{x:l.x2,y:l.y2},textPosition:{x:d[0],y:d[1]}};t.pathes.push(f),t.pathAnimation(t.pathes[h],i)}}})},t.prototype.calculateAbsCoord=function(t,i,e){var n=[];return t>=0&&t<90?(n[0]=i.x+Math.abs(e*+Math.sin(t*Math.PI/180).toPrecision(10)),n[1]=i.y-Math.abs(e*+Math.cos(t*Math.PI/180).toPrecision(10))):t>=90&&t<180?(n[0]=i.x+Math.abs(e*+Math.sin(t*Math.PI/180).toPrecision(10)),n[1]=i.y+Math.abs(e*+Math.cos(t*Math.PI/180).toPrecision(10))):t>=180&&t<270?(n[0]=i.x-Math.abs(e*+Math.sin(t*Math.PI/180).toPrecision(10)),n[1]=i.y+Math.abs(e*+Math.cos(t*Math.PI/180).toPrecision(10))):t>=270&&t<=360&&(n[0]=i.x-Math.abs(e*+Math.sin(t*Math.PI/180).toPrecision(10)),n[1]=i.y-Math.abs(e*+Math.cos(t*Math.PI/180).toPrecision(10))),n},t.prototype.createCircles=function(t){for(var i=t.sRadius;i<t.width;i+=t.sRadius)this.circles.push({center:{x:t.width/2,y:t.height/2},radius:i})},t.prototype.pathAnimation=function(t,i){var e=this,n=t.angle.start,a=this.prs.animateTime/((t.angle.end-t.angle.start)/this.prs.animateStep);setTimeout(function(){t.showTooltip=t.angle.end-t.angle.start>15},500);var s=setTimeout(function r(){if(n>=t.angle.end)return clearTimeout(s),!1;n+=e.prs.animateStep,n>t.angle.end&&(n=t.angle.end),t.flag=n-t.angle.start<=180?0:1;var o=e.calculateAbsCoord(n,i.center,t.radius);t.settings="M "+i.center.x+","+i.center.y+" L "+t.startPos.x+","+t.startPos.y+" A"+t.radius+","+t.radius+" 0 "+t.flag+", 1 "+o[0]+","+o[1],s=setTimeout(r,a),e.$scope.$digest()},a)},t.prototype.pathClick=function(t,i){t.preventDefault(),this.pathClickCb.call(this.ctx,i)}}(),function(){angular.module("app").directive("ngR",function(){return function(t,i,e){e.$observe("ngR",function(t){i.attr("r",t)})}}).directive("ngCx",function(){return function(t,i,e){e.$observe("ngCx",function(t){i.attr("cx",t)})}}).directive("ngX",function(){return function(t,i,e){e.$observe("ngX",function(t){i.attr("x",t)})}}).directive("ngY",function(){return function(t,i,e){e.$observe("ngY",function(t){i.attr("y",t)})}}).directive("ngCy",function(){return function(t,i,e){e.$observe("ngCy",function(t){i.attr("cy",t)})}}).directive("ngD",function(){return function(t,i,e){e.$observe("ngD",function(t){i.attr("d",t)})}}).directive("ngFill",function(){return function(t,i,e){e.$observe("ngFill",function(t){i.attr("fill",t)})}})}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwibWFpbkN0cmwiLCIkc2NvcGUiLCIkaHR0cCIsImNvbmZpZ0ZhY3RvcnkiLCJ0aGlzIiwiY29uZmlnIiwiaW5pdCIsIiRpbmplY3QiLCJjb250cm9sbGVyIiwicHJvdG90eXBlIiwiX3RoaXMiLCJnZXQiLCJmaXh0dXJlcyIsInRoZW4iLCJyZXNwIiwiY291bnRyaWVzIiwiZGF0YSIsImNOdW0iLCJpbmZvMiIsImlOdW0iLCJzZXRDb3VudHJ5IiwiZSIsImlkeCIsInByZXZlbnREZWZhdWx0Iiwic2V0SW5mbzJJdGVtIiwiY2FsbGJhY2tDbGljayIsIml0ZW0iLCJjb25zb2xlIiwibG9nIiwiZmFjdG9yeSIsInBhdGgiLCJjb21wb25lbnRzIiwid2lkdGgiLCJoZWlnaHQiLCJwcmVzZXRzIiwicGF0aENvbG9ycyIsIjAiLCIxIiwiMiIsInN2Z1dpZHRoIiwic3ZnSGVpZ2h0Iiwic3ZnU3R5bGVzIiwiZmlsbCIsInJhZGl1cyIsImFuaW1hdGVUaW1lIiwiYW5pbWF0ZVN0ZXAiLCJzUmFkaXVzIiwiJHN0YXRlUHJvdmlkZXIiLCIkdXJsUm91dGVyUHJvdmlkZXIiLCJwYXRoVG9Db21wb25lbnRzIiwib3RoZXJ3aXNlIiwibWFpblZpZXciLCJtYWluIiwidGVtcGxhdGVVcmwiLCJzdGF0ZSIsInVybCIsInZpZXdzIiwibmdEaWFncmFtbUN0cmwiLCJuZ0RnUHJlc2V0c0ZhY3RvcnkiLCJwYXRoQ2xpY2siLCJwcnMiLCJkaXJlY3RpdmUiLCJuZ0RpYWdyYW1tTGluayIsIiRlbGVtZW50IiwiJGF0dHJzIiwibmdEZyIsImxpbmsiLCJzY29wZSIsImNvbnRyb2xsZXJBcyIsImJpbmRUb0NvbnRyb2xsZXIiLCJzdHlsZXMiLCJzdGVwUmFkaXVzIiwicGF0aENsaWNrQ2IiLCJjdHgiLCJuYW1lIiwicGF0aGVzIiwiY2lyY2xlcyIsImNlbnRlciIsIngiLCJ5IiwiJHdhdGNoIiwibGVuZ3RoIiwiY3JlYXRlQ2lyY2xlcyIsImFyciIsImFuZ2xlc0FyciIsImtleSIsInB1c2giLCJ2YWx1ZSIsInRleHQiLCJjIiwiaSIsInByaW9yaXR5IiwiaiIsImExIiwiYTIiLCJfaSIsImNvb3JkcyIsIngxIiwieTEiLCJ4MiIsInkyIiwiX2FyciIsImNhbGN1bGF0ZUFic0Nvb3JkIiwiX2tleSIsIk1hdGgiLCJyb3VuZCIsInRleHRDcmQiLCJ0ZW1wbGF0ZSIsImlkIiwiY29sb3IiLCJzaG93VG9vbHRpcCIsImFuZ2xlIiwic3RhcnQiLCJlbmQiLCJzdGFydFBvcyIsImVuZFBvcyIsInRleHRQb3NpdGlvbiIsInBhdGhBbmltYXRpb24iLCJhYnMiLCJzaW4iLCJQSSIsInRvUHJlY2lzaW9uIiwiY29zIiwiX3NlbGYiLCJjdXJyZW50QW5nbGUiLCJ0aW1lU3RlcCIsInNldFRpbWVvdXQiLCJ0aW1lb3V0IiwiZiIsImNsZWFyVGltZW91dCIsImZsYWciLCJjdXJyZW50Q29vcmRzIiwic2V0dGluZ3MiLCIkZGlnZXN0IiwiY2FsbCIsImVsZW0iLCJhdHRycyIsIiRvYnNlcnZlIiwiciIsImF0dHIiLCJjeCIsImN5IiwiZCJdLCJtYXBwaW5ncyI6IkFBQUEsWUFFQUEsU0FBUUMsT0FBTyxPQUFRLFlBQWEsYUFBYyxhQUFjLGNBT2hFLFdBSUMsUUFBU0MsR0FBU0MsRUFBUUMsRUFBT0MsR0FDaENDLEtBQUtILE9BQVNBLEVBQ2RHLEtBQUtGLE1BQVFBLEVBQ2JFLEtBQUtDLE9BQVNGLEVBRWRDLEtBQUtFLE9BUk5OLEVBQVNPLFNBQVcsU0FBVSxRQUFTLGlCQUN2Q1QsUUFBUUMsT0FBTyxPQUFPUyxXQUFXLFdBQVlSLEdBVTdDQSxFQUFTUyxVQUFVSCxLQUFPLFdBQ3pCLEdBQUlJLEdBQVFOLElBRVpBLE1BQUtGLE1BQU1TLElBQUlQLEtBQUtDLE9BQU9PLFNBQVcsa0JBQWtCQyxLQUFLLFNBQVVDLEdBQ3RFSixFQUFNSyxVQUFZRCxFQUFLRSxLQUN2Qk4sRUFBTU8sS0FBTyxJQUdkYixLQUFLRixNQUFNUyxJQUFJUCxL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blxuYW5ndWxhci5tb2R1bGUoJ2FwcCcsIFsnbmdBbmltYXRlJywgJ25nTWF0ZXJpYWwnLCAnbmdNZXNzYWdlcycsICd1aS5yb3V0ZXInXSk7XG4vL2xldCBtYWluQ3RybCA9IHJlcXVpcmUoJy4vY29udHJvbGxlcnMvbWFpbkN0cmwnKTtcbi8vXG4vL2FuZ3VsYXIubW9kdWxlKCdhcHAnKS5jb250cm9sbGVyKCdtYWluQ3RybCcsIG1haW5DdHJsKTtcblwidXNlIHN0cmljdFwiO1xuJ3VzZSBzdHJpY3QnO1xuXG4oZnVuY3Rpb24gKCkge1xuXHRtYWluQ3RybC4kaW5qZWN0ID0gW1wiJHNjb3BlXCIsIFwiJGh0dHBcIiwgXCJjb25maWdGYWN0b3J5XCJdO1xuXHRhbmd1bGFyLm1vZHVsZSgnYXBwJykuY29udHJvbGxlcignbWFpbkN0cmwnLCBtYWluQ3RybCk7XG5cblx0ZnVuY3Rpb24gbWFpbkN0cmwoJHNjb3BlLCAkaHR0cCwgY29uZmlnRmFjdG9yeSkge1xuXHRcdHRoaXMuJHNjb3BlID0gJHNjb3BlO1xuXHRcdHRoaXMuJGh0dHAgPSAkaHR0cDtcblx0XHR0aGlzLmNvbmZpZyA9IGNvbmZpZ0ZhY3Rvcnk7XG5cblx0XHR0aGlzLmluaXQoKTtcblx0fVxuXG5cdG1haW5DdHJsLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKCkge1xuXHRcdHZhciBfdGhpcyA9IHRoaXM7XG5cblx0XHR0aGlzLiRodHRwLmdldCh0aGlzLmNvbmZpZy5maXh0dXJlcyArICdjb3VudHJpZXMuanNvbicpLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHtcblx0XHRcdF90aGlzLmNvdW50cmllcyA9IHJlc3AuZGF0YTtcblx0XHRcdF90aGlzLmNOdW0gPSAwO1xuXHRcdH0pO1xuXG5cdFx0dGhpcy4kaHR0cC5nZXQodGhpcy5jb25maWcuZml4dHVyZXMgKyAnb3RoZXJpbmZvLmpzb24nKS50aGVuKGZ1bmN0aW9uIChyZXNwKSB7XG5cdFx0XHRfdGhpcy5pbmZvMiA9IHJlc3AuZGF0YTtcblx0XHRcdF90aGlzLmlOdW0gPSAwO1xuXHRcdH0pO1xuXHR9O1xuXG5cdG1haW5DdHJsLnByb3RvdHlwZS5zZXRDb3VudHJ5ID0gZnVuY3Rpb24gKGUsIGlkeCkge1xuXHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHR0aGlzLmNOdW0gPSBpZHg7XG5cdH07XG5cblx0bWFpbkN0cmwucHJvdG90eXBlLnNldEluZm8ySXRlbSA9IGZ1bmN0aW9uIChlLCBpZHgpIHtcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0dGhpcy5pTnVtID0gaWR4O1xuXHR9O1xuXG5cdG1haW5DdHJsLnByb3RvdHlwZS5jYWxsYmFja0NsaWNrID0gZnVuY3Rpb24gKGl0ZW0pIHtcblx0XHRjb25zb2xlLmxvZygnLS0tPT09IGl0ZW0gPT09LS0tJywgaXRlbSk7XG5cdH07XG59KSgpO1xuJ3VzZSBzdHJpY3QnO1xuXG4oZnVuY3Rpb24gKCkge1xuXHRhbmd1bGFyLm1vZHVsZSgnYXBwJykuZmFjdG9yeSgnY29uZmlnRmFjdG9yeScsIGZ1bmN0aW9uICgpIHtcblx0XHR2YXIgcGF0aCA9IHtcblx0XHRcdGZpeHR1cmVzOiAnLi9zcmMvZml4dHVyZXMvJyxcblx0XHRcdGNvbXBvbmVudHM6ICcuL3NyYy9jb21wb25lbnRzLydcblx0XHR9O1xuXG5cdFx0cmV0dXJuIHtcblx0XHRcdGZpeHR1cmVzOiBwYXRoLmZpeHR1cmVzLFxuXHRcdFx0Y29tcG9uZW50czogcGF0aC5jb21wb25lbnRzXG5cdFx0fTtcblx0fSk7XG59KSgpO1xuJ3VzZSBzdHJpY3QnO1xuXG4oZnVuY3Rpb24gKCkge1xuXHRhbmd1bGFyLm1vZHVsZSgnYXBwJykuZmFjdG9yeSgnbmdEZ1ByZXNldHNGYWN0b3J5JywgZnVuY3Rpb24gKCkge1xuXHRcdHZhciB3aWR0aCA9IDUwMDtcblx0XHR2YXIgaGVpZ2h0ID0gNTAwO1xuXG5cdFx0dmFyIHByZXNldHMgPSB7XG5cdFx0XHRwYXRoQ29sb3JzOiB7IDA6ICcjZjU4YTQxJywgMTogJyNmMGQzNjcnLCAyOiAnI2U2NGQxYicgfSxcblx0XHRcdHN2Z1dpZHRoOiB3aWR0aCxcblx0XHRcdHN2Z0hlaWdodDogaGVpZ2h0LFxuXHRcdFx0c3ZnU3R5bGVzOiB7XG5cdFx0XHRcdCd3aWR0aCc6IHdpZHRoLFxuXHRcdFx0XHQnaGVpZ2h0JzogaGVpZ2h0LFxuXHRcdFx0XHQnZmlsbCc6ICdibHVlJ1xuXHRcdFx0fSxcblx0XHRcdHJhZGl1czogMTU1LFxuXHRcdFx0YW5pbWF0ZVRpbWU6IDUwMCxcblx0XHRcdGFuaW1hdGVTdGVwOiAxLFxuXHRcdFx0c1JhZGl1czogMzBcblx0XHR9O1xuXG5cdFx0cmV0dXJuIHtcblx0XHRcdHBhdGhDb2xvcnM6IHByZXNldHMucGF0aENvbG9ycyxcblx0XHRcdHN2Z1dpZHRoOiBwcmVzZXRzLnN2Z1dpZHRoLFxuXHRcdFx0c3ZnSGVpZ2h0OiBwcmVzZXRzLnN2Z0hlaWdodCxcblx0XHRcdHN2Z1N0eWxlczogcHJlc2V0cy5zdmdTdHlsZXMsXG5cdFx0XHRyYWRpdXM6IHByZXNldHMucmFkaXVzLFxuXHRcdFx0YW5pbWF0ZVRpbWU6IHByZXNldHMuYW5pbWF0ZVRpbWUsXG5cdFx0XHRhbmltYXRlU3RlcDogcHJlc2V0cy5hbmltYXRlU3RlcCxcblx0XHRcdHNSYWRpdXM6IHByZXNldHMuc1JhZGl1c1xuXHRcdH07XG5cdH0pO1xufSkoKTtcblwidXNlIHN0cmljdFwiO1xuXG4oZnVuY3Rpb24gKCkge1xuXHRhbmd1bGFyLm1vZHVsZSgnYXBwJykuY29uZmlnKFtcIiRzdGF0ZVByb3ZpZGVyXCIsIFwiJHVybFJvdXRlclByb3ZpZGVyXCIsIGZ1bmN0aW9uICgkc3RhdGVQcm92aWRlciwgJHVybFJvdXRlclByb3ZpZGVyKSB7XG5cdFx0dmFyIHBhdGhUb0NvbXBvbmVudHMgPSAnLi9zcmMvY29tcG9uZW50cy8nO1xuXG5cdFx0JHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZSgnLycpO1xuXG5cdFx0dmFyIG1haW5WaWV3ID0ge1xuXHRcdFx0XCJtYWluXCI6IHtcblx0XHRcdFx0dGVtcGxhdGVVcmw6IHBhdGhUb0NvbXBvbmVudHMgKyAnbWFpbi9pbmRleC5odG1sJ1xuXHRcdFx0XHQvL3RlbXBsYXRlVXJsOiBjb25maWdGYWN0b3J5LmNvbXBvbmVudHMgKyAnZGlhZ3JhbW1QYWdlL2RpYWdyYW1tUGFnZS5odG1sJ1xuXHRcdFx0fVxuXHRcdH07XG5cblx0XHQkc3RhdGVQcm92aWRlci5zdGF0ZSgnaG9tZScsIHtcblx0XHRcdHVybDogJy8nLFxuXHRcdFx0dmlld3M6IG1haW5WaWV3XG5cdFx0fSk7XG5cdH1dKTtcbn0pKCk7XG4ndXNlIHN0cmljdCc7XG5cbihmdW5jdGlvbiAoKSB7XG5cdG5nRGlhZ3JhbW1DdHJsLiRpbmplY3QgPSBbXCIkc2NvcGVcIiwgXCJuZ0RnUHJlc2V0c0ZhY3RvcnlcIl07XG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAnKS5jb250cm9sbGVyKCduZ0RpYWdyYW1tQ3RybCcsIG5nRGlhZ3JhbW1DdHJsKTtcblxuXHRhbmd1bGFyLm1vZHVsZSgnYXBwJykuZGlyZWN0aXZlKCduZ0RpYWdyYW1tJywgW1wiY29uZmlnRmFjdG9yeVwiLCBmdW5jdGlvbiAoY29uZmlnRmFjdG9yeSkge1xuXHRcdHZhciBuZ0RnID0gJ25nRGlhZ3JhbW0nO1xuXG5cdFx0ZnVuY3Rpb24gbmdEaWFncmFtbUxpbmsoJHNjb3BlLCAkZWxlbWVudCwgJGF0dHJzKSB7fVxuXG5cdFx0cmV0dXJuIHtcblx0XHRcdGxpbms6IG5nRGlhZ3JhbW1MaW5rLFxuXHRcdFx0c2NvcGU6IHt9LFxuXHRcdFx0dGVtcGxhdGVVcmw6IGNvbmZpZ0ZhY3RvcnkuY29tcG9uZW50cyArIG5nRGcgKyAnLycgKyBuZ0RnICsgJy5odG1sJyxcblx0XHRcdGNvbnRyb2xsZXI6IG5nRGlhZ3JhbW1DdHJsLFxuXHRcdFx0Y29udHJvbGxlckFzOiAnZGcnLFxuXHRcdFx0YmluZFRvQ29udHJvbGxlcjoge1xuXHRcdFx0XHRkYXRhOiAnPT8nLFxuXHRcdFx0XHRzdHlsZXM6ICc9PycsXG5cdFx0XHRcdHdpZHRoOiAnQD8nLFxuXHRcdFx0XHRoZWlnaHQ6ICdAPycsXG5cdFx0XHRcdHJhZGl1czogJ0A/Jyxcblx0XHRcdFx0c3RlcFJhZGl1czogJ0A/Jyxcblx0XHRcdFx0cGF0aENsaWNrQ2I6ICc9PycsXG5cdFx0XHRcdGN0eDogJz0/Jyxcblx0XHRcdFx0bmFtZTogJ0A/J1xuXHRcdFx0fVxuXHRcdH07XG5cdH1dKTtcblxuXHRmdW5jdGlvbiBuZ0RpYWdyYW1tQ3RybCgkc2NvcGUsIG5nRGdQcmVzZXRzRmFjdG9yeSkge1xuXHRcdHRoaXMuJHNjb3BlID0gJHNjb3BlO1xuXHRcdGlmICghdGhpcy5wYXRoQ2xpY2spIHRoaXMucGF0aENsaWNrID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0Y29uc29sZS5sb2coJ9Ca0L7Qu9C70LHQtdC6INC/0L4g0LrQu9C40LrRgyDQvdC1INC30LDQtNCw0L0nKTtcblx0XHR9O1xuXHRcdC8qKlxuICAgKiDQlNC10YTQvtC70YLQvdGL0LUg0L3QsNGB0YLRgNC+0LnQutC4INC00LvRjyDQtNC40YDQtdC60YLQuNCy0LrQuFxuICAgKi9cblx0XHR0aGlzLnBycyA9IG5nRGdQcmVzZXRzRmFjdG9yeTtcblxuXHRcdHRoaXMuaW5pdCgpO1xuXHR9XG5cblx0LyoqXG4gICog0KHRgtCw0YDRgtGD0LXQvFxuICAqL1xuXHRuZ0RpYWdyYW1tQ3RybC5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uICgpIHtcblx0XHR2YXIgX3RoaXMgPSB0aGlzO1xuXG5cdFx0LyoqXG4gICAqINCc0LDRgdGB0LjQsiDRgtGN0LPQviA8Zz4sINC60L7RgtC+0YDRi9C5INGA0LXQvdC00LXRgNC40YLRgdGPINCyINGC0LXQvNC/0LvQtdC50YLQtVxuICAgKi9cblx0XHR0aGlzLnBhdGhlcyA9IFtdO1xuXG5cdFx0LyoqXG4gICAqINCc0LDRgdGB0LjQsiDRgtGN0LPQviA8Y2lyY2xlPlxuICAgKi9cblx0XHR0aGlzLmNpcmNsZXMgPSBbXTtcblxuXHRcdHZhciBjb25maWcgPSB7XG5cdFx0XHR3aWR0aDogK3RoaXMud2lkdGggfHwgdGhpcy5wcnMuc3ZnV2lkdGgsXG5cdFx0XHRoZWlnaHQ6ICt0aGlzLmhlaWdodCB8fCB0aGlzLnBycy5zdmdIZWlnaHQsXG5cdFx0XHRyYWRpdXM6ICt0aGlzLnJhZGl1cyB8fCB0aGlzLnBycy5yYWRpdXMsXG5cdFx0XHRzUmFkaXVzOiArdGhpcy5zdGVwUmFkaXVzIHx8IHRoaXMucHJzLnNSYWRpdXMsXG5cdFx0XHRjZW50ZXI6IHsgeDogKCt0aGlzLndpZHRoIHx8IHRoaXMucHJzLnN2Z1dpZHRoKSAvIDIsIHk6ICgrdGhpcy5oZWlnaHQgfHwgdGhpcy5wcnMuc3ZnSGVpZ2h0KSAvIDIgfVxuXHRcdH07XG5cblx0XHR0aGlzLiRzY29wZS4kd2F0Y2goZnVuY3Rpb24gKCkge1xuXHRcdFx0cmV0dXJuIF90aGlzLmRhdGE7XG5cdFx0fSwgZnVuY3Rpb24gKGRhdGEpIHtcblx0XHRcdGlmIChkYXRhKSB7XG5cdFx0XHRcdC8vVE9ETzog0J3QsNC/0LjRgdCw0YLRjCDQv9GA0L7QstC10YDQutGDINC90LAg0YHRg9C80LzRgyDQv9GA0L7RhtC10L3RgtC+0LJcblxuXHRcdFx0XHRpZiAoX3RoaXMucGF0aGVzICYmIF90aGlzLnBhdGhlcy5sZW5ndGgpIF90aGlzLnBhdGhlcy5sZW5ndGggPSAwO1xuXG5cdFx0XHRcdGlmICghX3RoaXMuY2lyY2xlcy5sZW5ndGgpIF90aGlzLmNyZWF0ZUNpcmNsZXMoY29uZmlnKTtcblxuXHRcdFx0XHR2YXIgYXJyID0gW10sXG5cdFx0XHRcdCAgICBhbmdsZXNBcnIgPSBbXTtcblxuXHRcdFx0XHRmb3IgKHZhciBrZXkgaW4gZGF0YS5kYXRhKSB7XG5cdFx0XHRcdFx0YXJyLnB1c2goe1xuXHRcdFx0XHRcdFx0dmFsdWU6IGRhdGEuZGF0YVtrZXldLnZhbHVlLFxuXHRcdFx0XHRcdFx0dGV4dDogZGF0YS5kYXRhW2tleV0udGV4dFxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0LyoqXG4gICAgICog0KHQvtC30LTQsNC10Lwg0YHQtdC60YLQvtGA0LAuINCf0YDQvtGG0LXQvdGC0Ysg0L/QtdGA0LXQstC+0LTQuNC8INCyINGA0LDQtNC40LDQvdGLXG4gICAgICogYTEgLSDQvdCw0YfQsNC70L4g0YHQtdC60YLQvtGA0LAsINCwMiA9INC60L7QvdC10YYg0YHQtdC60YLQvtGA0LBcbiAgICAgKi9cblx0XHRcdFx0Zm9yICh2YXIgYyA9IDAsIGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSArPSAxKSB7XG5cdFx0XHRcdFx0dmFyIHByaW9yaXR5ID0gMDtcblx0XHRcdFx0XHRmb3IgKHZhciBqID0gMDsgaiA8IGFyci5sZW5ndGg7IGogKz0gMSkge1xuXHRcdFx0XHRcdFx0aWYgKGFycltpXS52YWx1ZSA8IGFycltqXS52YWx1ZSkgcHJpb3JpdHkgKz0gMTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0YW5nbGVzQXJyLnB1c2goeyBhMTogYyAqIDMuNiwgYTI6IChjICsgYXJyW2ldLnZhbHVlKSAqIDMuNiwgdGV4dDogYXJyW2ldLnRleHQsIHZhbHVlOiBhcnJbaV0udmFsdWUsIHNSYWRpdXM6IHByaW9yaXR5IH0pOyAvLyDQn9C10YDQtdCy0L7QtNC40Lwg0LPRgNCw0LTRg9GB0Ysg0LIg0LPRgNCw0LTQuNC10L3RgtGLXG5cdFx0XHRcdFx0YyArPSBhcnJbaV0udmFsdWU7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRmb3IgKHZhciBfaSA9IDA7IF9pIDwgYW5nbGVzQXJyLmxlbmd0aDsgX2kgKz0gMSkge1xuXHRcdFx0XHRcdHZhciBjb29yZHMgPSB7IHgxOiAnJywgeTE6ICcnLCB4MjogJycsIHkyOiAnJyB9O1xuXG5cdFx0XHRcdFx0dmFyIF9hcnIgPSBfdGhpcy5jYWxjdWxhdGVBYnNDb29yZChhbmdsZXNBcnJbX2ldLmExLCBjb25maWcuY2VudGVyLCBjb25maWcucmFkaXVzIC0gYW5nbGVzQXJyW19pXS5zUmFkaXVzICogY29uZmlnLnNSYWRpdXMpO1xuXHRcdFx0XHRcdGNvb3Jkcy54MSA9IF9hcnJbMF07XG5cdFx0XHRcdFx0Y29vcmRzLnkxID0gX2FyclsxXTtcblxuXHRcdFx0XHRcdF9hcnIgPSBfdGhpcy5jYWxjdWxhdGVBYnNDb29yZChhbmdsZXNBcnJbX2ldLmEyLCBjb25maWcuY2VudGVyLCBjb25maWcucmFkaXVzIC0gYW5nbGVzQXJyW19pXS5zUmFkaXVzICogY29uZmlnLnNSYWRpdXMpO1xuXHRcdFx0XHRcdGNvb3Jkcy54MiA9IF9hcnJbMF07XG5cdFx0XHRcdFx0Y29vcmRzLnkyID0gX2FyclsxXTtcblxuXHRcdFx0XHRcdGZvciAodmFyIF9rZXkgaW4gY29vcmRzKSB7XG5cdFx0XHRcdFx0XHRjb29yZHNbX2tleV0gPSBNYXRoLnJvdW5kKGNvb3Jkc1tfa2V5XSk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0LyoqXG4gICAgICAqINCh0LLQvtC50YHRgtCy0L4sINC60L7RgtC+0YDQvtC1INC60L7RgNC80LjQvCDQvdCwINCy0YzRjtGF0YMg0LTQu9GPINC+0YLRgNC40YHQvtCy0LrQuCDRgdC10LrRgtC+0YDQsFxuICAgICAgKi9cblx0XHRcdFx0XHR2YXIgdGV4dENyZCA9IF90aGlzLmNhbGN1bGF0ZUFic0Nvb3JkKChhbmdsZXNBcnJbX2ldLmExICsgYW5nbGVzQXJyW19pXS5hMikgLyAyLCBjb25maWcuY2VudGVyLCAoY29uZmlnLnJhZGl1cyAtIF9pICogY29uZmlnLnNSYWRpdXMpIC8gMik7XG5cblx0XHRcdFx0XHR2YXIgdGVtcGxhdGUgPSB7XG5cdFx0XHRcdFx0XHRpZDogJ2dfJyArIChfaSArIDEpLFxuXHRcdFx0XHRcdFx0Y29sb3I6IF90aGlzLnBycy5wYXRoQ29sb3JzW2FuZ2xlc0FycltfaV0uc1JhZGl1c10sXG5cdFx0XHRcdFx0XHR2YWx1ZTogYW5nbGVzQXJyW19pXS52YWx1ZSxcblx0XHRcdFx0XHRcdHRleHQ6IGFuZ2xlc0FycltfaV0udGV4dCxcblx0XHRcdFx0XHRcdHJhZGl1czogY29uZmlnLnJhZGl1cyAtIGFuZ2xlc0FycltfaV0uc1JhZGl1cyAqIGNvbmZpZy5zUmFkaXVzLFxuXHRcdFx0XHRcdFx0c2hvd1Rvb2x0aXA6IGZhbHNlLFxuXHRcdFx0XHRcdFx0YW5nbGU6IHtcblx0XHRcdFx0XHRcdFx0c3RhcnQ6IGFuZ2xlc0FycltfaV0uYTEsXG5cdFx0XHRcdFx0XHRcdGVuZDogYW5nbGVzQXJyW19pXS5hMlxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdHN0YXJ0UG9zOiB7XG5cdFx0XHRcdFx0XHRcdHg6IGNvb3Jkcy54MSxcblx0XHRcdFx0XHRcdFx0eTogY29vcmRzLnkxXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0ZW5kUG9zOiB7XG5cdFx0XHRcdFx0XHRcdHg6IGNvb3Jkcy54Mixcblx0XHRcdFx0XHRcdFx0eTogY29vcmRzLnkyXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0dGV4dFBvc2l0aW9uOiB7XG5cdFx0XHRcdFx0XHRcdHg6IHRleHRDcmRbMF0sXG5cdFx0XHRcdFx0XHRcdHk6IHRleHRDcmRbMV1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9O1xuXG5cdFx0XHRcdFx0X3RoaXMucGF0aGVzLnB1c2godGVtcGxhdGUpO1xuXG5cdFx0XHRcdFx0X3RoaXMucGF0aEFuaW1hdGlvbihfdGhpcy5wYXRoZXNbX2ldLCBjb25maWcpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH07XG5cblx0LyoqXG4gICog0KTRg9C90LrRhtC40Y8g0LLQvtC30LLRgNCw0YnQsNC10YIg0LzQsNGB0YHQuNCyINC40Lcg0LTQstGD0YUg0YfQuNGB0LXQuyAo0LrQvtC+0YDQtNC40L3QsNGC0YsgeCDQuCDRgylcbiAgKiDQmtC+0L7RgNC00LjQvdCw0YLRiyDRgNCw0YHRgdGH0LjRgtGL0LLQsNGO0YLRgdGPINC00LvRjyDQvtC/0YDQtdC00LXQu9GR0L3QvdC+0LPQviDRg9Cz0LvQsCDQvtGC0L3QvtGB0LjRgtC10LvRjNC90L4g0YbQtdC90YLRgNCwINC00LjQsNCz0YDQsNC80LzRiy5cbiAgKiDQo9GH0LjRgtGL0LLQsNC10Lwg0YDQsNC00LjRg9GBXG4gICovXG5cdG5nRGlhZ3JhbW1DdHJsLnByb3RvdHlwZS5jYWxjdWxhdGVBYnNDb29yZCA9IGZ1bmN0aW9uIChhbmdsZSwgY2VudGVyLCByYWRpdXMpIHtcblx0XHR2YXIgYXJyID0gW107XG5cdFx0aWYgKGFuZ2xlID49IDAgJiYgYW5nbGUgPCA5MCkge1xuXHRcdFx0YXJyWzBdID0gY2VudGVyLnggKyBNYXRoLmFicyhyYWRpdXMgKiArTWF0aC5zaW4oYW5nbGUgKiBNYXRoLlBJIC8gMTgwKS50b1ByZWNpc2lvbigxMCkpO1xuXHRcdFx0YXJyWzFdID0gY2VudGVyLnkgLSBNYXRoLmFicyhyYWRpdXMgKiArTWF0aC5jb3MoYW5nbGUgKiBNYXRoLlBJIC8gMTgwKS50b1ByZWNpc2lvbigxMCkpO1xuXHRcdH0gZWxzZSBpZiAoYW5nbGUgPj0gOTAgJiYgYW5nbGUgPCAxODApIHtcblx0XHRcdGFyclswXSA9IGNlbnRlci54ICsgTWF0aC5hYnMocmFkaXVzICogK01hdGguc2luKGFuZ2xlICogTWF0aC5QSSAvIDE4MCkudG9QcmVjaXNpb24oMTApKTtcblx0XHRcdGFyclsxXSA9IGNlbnRlci55ICsgTWF0aC5hYnMocmFkaXVzICogK01hdGguY29zKGFuZ2xlICogTWF0aC5QSSAvIDE4MCkudG9QcmVjaXNpb24oMTApKTtcblx0XHR9IGVsc2UgaWYgKGFuZ2xlID49IDE4MCAmJiBhbmdsZSA8IDI3MCkge1xuXHRcdFx0YXJyWzBdID0gY2VudGVyLnggLSBNYXRoLmFicyhyYWRpdXMgKiArTWF0aC5zaW4oYW5nbGUgKiBNYXRoLlBJIC8gMTgwKS50b1ByZWNpc2lvbigxMCkpO1xuXHRcdFx0YXJyWzFdID0gY2VudGVyLnkgKyBNYXRoLmFicyhyYWRpdXMgKiArTWF0aC5jb3MoYW5nbGUgKiBNYXRoLlBJIC8gMTgwKS50b1ByZWNpc2lvbigxMCkpO1xuXHRcdH0gZWxzZSBpZiAoYW5nbGUgPj0gMjcwICYmIGFuZ2xlIDw9IDM2MCkge1xuXHRcdFx0YXJyWzBdID0gY2VudGVyLnggLSBNYXRoLmFicyhyYWRpdXMgKiArTWF0aC5zaW4oYW5nbGUgKiBNYXRoLlBJIC8gMTgwKS50b1ByZWNpc2lvbigxMCkpO1xuXHRcdFx0YXJyWzFdID0gY2VudGVyLnkgLSBNYXRoLmFicyhyYWRpdXMgKiArTWF0aC5jb3MoYW5nbGUgKiBNYXRoLlBJIC8gMTgwKS50b1ByZWNpc2lvbigxMCkpO1xuXHRcdH1cblx0XHRyZXR1cm4gYXJyO1xuXHR9O1xuXG5cdC8qKlxuICAqINCh0L7Qt9C00LDQtdC8INC80LDRgdGB0LjQsiDQv9GD0L3QutGC0LjRgNC90YvRhSDQutC+0LvQtdGGXG4gICovXG5cdG5nRGlhZ3JhbW1DdHJsLnByb3RvdHlwZS5jcmVhdGVDaXJjbGVzID0gZnVuY3Rpb24gKGNvbmZpZykge1xuXHRcdGZvciAodmFyIGkgPSBjb25maWcuc1JhZGl1czsgaSA8IGNvbmZpZy53aWR0aDsgaSArPSBjb25maWcuc1JhZGl1cykge1xuXHRcdFx0dGhpcy5jaXJjbGVzLnB1c2goe1xuXHRcdFx0XHRjZW50ZXI6IHtcblx0XHRcdFx0XHR4OiBjb25maWcud2lkdGggLyAyLFxuXHRcdFx0XHRcdHk6IGNvbmZpZy5oZWlnaHQgLyAyXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHJhZGl1czogaVxuXHRcdFx0fSk7XG5cdFx0fVxuXHR9O1xuXG5cdC8qKlxuICAqINCk0YPQvdC60YbQuNGPINCw0L3QuNC80LDRhtC40LhcbiAgKi9cblx0bmdEaWFncmFtbUN0cmwucHJvdG90eXBlLnBhdGhBbmltYXRpb24gPSBmdW5jdGlvbiAocGF0aCwgY29uZmlnKSB7XG5cdFx0dmFyIF9zZWxmID0gdGhpcztcblx0XHR2YXIgY3VycmVudEFuZ2xlID0gcGF0aC5hbmdsZS5zdGFydDtcblx0XHR2YXIgdGltZVN0ZXAgPSB0aGlzLnBycy5hbmltYXRlVGltZSAvICgocGF0aC5hbmdsZS5lbmQgLSBwYXRoLmFuZ2xlLnN0YXJ0KSAvIHRoaXMucHJzLmFuaW1hdGVTdGVwKTtcblxuXHRcdHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHRcdFx0cGF0aC5zaG93VG9vbHRpcCA9IHBhdGguYW5nbGUuZW5kIC0gcGF0aC5hbmdsZS5zdGFydCA+IDE1O1xuXHRcdFx0Ly9fc2VsZi4kc2NvcGUuJGRpZ2VzdCgpO1xuXHRcdH0sIDUwMCk7XG5cblx0XHR2YXIgdGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gZigpIHtcblx0XHRcdGlmIChjdXJyZW50QW5nbGUgPj0gcGF0aC5hbmdsZS5lbmQpIHtcblx0XHRcdFx0Y2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cblx0XHRcdC8qKlxuICAgICog0KHQvNC10YnQsNC10Lwg0YHQtdC60YLQvtGAINC90LAg0LfQsNC00LDQvdGL0Lkg0YjQsNCzINC4INC/0YDQvtCy0LXRgNGP0LXQvCwg0YfRgtC+0LHRiyDRg9Cz0L7QuyDQvdC1INC/0YDQtdCy0YvRiNCw0Lsg0LfQvdCw0YfQtdC90LjQtSDRg9Cz0LvQsCDQv9GA0LDQstC+0LPQviDQutGA0LDRjyDRgdC10LrRgtC+0YDQsFxuICAgICovXG5cdFx0XHRjdXJyZW50QW5nbGUgKz0gX3NlbGYucHJzLmFuaW1hdGVTdGVwO1xuXHRcdFx0aWYgKGN1cnJlbnRBbmdsZSA+IHBhdGguYW5nbGUuZW5kKSBjdXJyZW50QW5nbGUgPSBwYXRoLmFuZ2xlLmVuZDtcblxuXHRcdFx0LyoqXG4gICAgKiDQodC80L7RgtGA0LjQvCwg0LrQsNC60YPRjiDRh9Cw0YHRgtGMINC00YPQs9C4INC+0YLRgNC40YHQvtCy0YvQstCw0YLRjC4g0JXRgdC70Lgg0LTRg9Cz0LAg0LzQtdC90YzRiNC1IDE4MCDQs9GA0LDQtNGD0YHQvtCyIC0g0YHRgtCw0LLQuNC8INGE0LvQsNCzINC90LAg0L7RgtGA0LjRgdC+0LLQutGDINC80LXQvdGM0YjQtdC5INGB0YLQvtGA0L7QvdGLXG4gICAgKi9cblx0XHRcdHBhdGguZmxhZyA9IGN1cnJlbnRBbmdsZSAtIHBhdGguYW5nbGUuc3RhcnQgPD0gMTgwID8gMCA6IDE7XG5cblx0XHRcdC8qKlxuICAgICog0KLQtdC60YPRidCw0Y8g0LrQvtC+0YDQtNC40L3QsNGC0LAg0YHQvNC10YnQtdC90LjRjyDQtNGD0LPQuFxuICAgICovXG5cdFx0XHR2YXIgY3VycmVudENvb3JkcyA9IF9zZWxmLmNhbGN1bGF0ZUFic0Nvb3JkKGN1cnJlbnRBbmdsZSwgY29uZmlnLmNlbnRlciwgcGF0aC5yYWRpdXMpO1xuXHRcdFx0cGF0aC5zZXR0aW5ncyA9ICdNICcgKyBjb25maWcuY2VudGVyLnggKyAnLCcgKyBjb25maWcuY2VudGVyLnkgKyAnIEwgJyArICcnICsgcGF0aC5zdGFydFBvcy54ICsgJywnICsgcGF0aC5zdGFydFBvcy55ICsgJyBBJyArICcnICsgcGF0aC5yYWRpdXMgKyAnLCcgKyBwYXRoLnJhZGl1cyArICcgMCAnICsgJycgKyBwYXRoLmZsYWcgKyAnLCAxICcgKyBjdXJyZW50Q29vcmRzWzBdICsgJywnICsgY3VycmVudENvb3Jkc1sxXSArICcnO1xuXG5cdFx0XHQvKipcbiAgICAqINCg0LXQutGD0YDRgdC40Lwg0YLQsNC50LzQsNGD0YJcbiAgICAqL1xuXHRcdFx0dGltZW91dCA9IHNldFRpbWVvdXQoZiwgdGltZVN0ZXApO1xuXG5cdFx0XHQvKipcbiAgICAqINCe0LHQvdC+0LLQu9GP0LXQvCDQstGM0Y7RhdGDXG4gICAgKi9cblx0XHRcdF9zZWxmLiRzY29wZS4kZGlnZXN0KCk7XG5cdFx0fSwgdGltZVN0ZXApO1xuXHR9O1xuXG5cdC8qKlxuICAqINCa0L7Qu9C70LHQtdC6INC60LvQuNC60LBcbiAgKi9cblx0bmdEaWFncmFtbUN0cmwucHJvdG90eXBlLnBhdGhDbGljayA9IGZ1bmN0aW9uIChlLCBpdGVtKSB7XG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdHRoaXMucGF0aENsaWNrQ2IuY2FsbCh0aGlzLmN0eCwgaXRlbSk7XG5cdH07XG59KSgpO1xuJ3VzZSBzdHJpY3QnO1xuXG4oZnVuY3Rpb24gKCkge1xuXHRhbmd1bGFyLm1vZHVsZSgnYXBwJykuZGlyZWN0aXZlKCduZ1InLCBmdW5jdGlvbiAoKSB7XG5cdFx0cmV0dXJuIGZ1bmN0aW9uIChzY29wZSwgZWxlbSwgYXR0cnMpIHtcblx0XHRcdGF0dHJzLiRvYnNlcnZlKCduZ1InLCBmdW5jdGlvbiAocikge1xuXHRcdFx0XHRlbGVtLmF0dHIoJ3InLCByKTtcblx0XHRcdH0pO1xuXHRcdH07XG5cdH0pLmRpcmVjdGl2ZSgnbmdDeCcsIGZ1bmN0aW9uICgpIHtcblx0XHRyZXR1cm4gZnVuY3Rpb24gKHNjb3BlLCBlbGVtLCBhdHRycykge1xuXHRcdFx0YXR0cnMuJG9ic2VydmUoJ25nQ3gnLCBmdW5jdGlvbiAoY3gpIHtcblx0XHRcdFx0ZWxlbS5hdHRyKCdjeCcsIGN4KTtcblx0XHRcdH0pO1xuXHRcdH07XG5cdH0pLmRpcmVjdGl2ZSgnbmdYJywgZnVuY3Rpb24gKCkge1xuXHRcdHJldHVybiBmdW5jdGlvbiAoc2NvcGUsIGVsZW0sIGF0dHJzKSB7XG5cdFx0XHRhdHRycy4kb2JzZXJ2ZSgnbmdYJywgZnVuY3Rpb24gKHgpIHtcblx0XHRcdFx0ZWxlbS5hdHRyKCd4JywgeCk7XG5cdFx0XHR9KTtcblx0XHR9O1xuXHR9KS5kaXJlY3RpdmUoJ25nWScsIGZ1bmN0aW9uICgpIHtcblx0XHRyZXR1cm4gZnVuY3Rpb24gKHNjb3BlLCBlbGVtLCBhdHRycykge1xuXHRcdFx0YXR0cnMuJG9ic2VydmUoJ25nWScsIGZ1bmN0aW9uICh5KSB7XG5cdFx0XHRcdGVsZW0uYXR0cigneScsIHkpO1xuXHRcdFx0fSk7XG5cdFx0fTtcblx0fSkuZGlyZWN0aXZlKCduZ0N5JywgZnVuY3Rpb24gKCkge1xuXHRcdHJldHVybiBmdW5jdGlvbiAoc2NvcGUsIGVsZW0sIGF0dHJzKSB7XG5cdFx0XHRhdHRycy4kb2JzZXJ2ZSgnbmdDeScsIGZ1bmN0aW9uIChjeSkge1xuXHRcdFx0XHRlbGVtLmF0dHIoJ2N5JywgY3kpO1xuXHRcdFx0fSk7XG5cdFx0fTtcblx0fSkuZGlyZWN0aXZlKCduZ0QnLCBmdW5jdGlvbiAoKSB7XG5cdFx0cmV0dXJuIGZ1bmN0aW9uIChzY29wZSwgZWxlbSwgYXR0cnMpIHtcblx0XHRcdGF0dHJzLiRvYnNlcnZlKCduZ0QnLCBmdW5jdGlvbiAoZCkge1xuXHRcdFx0XHRlbGVtLmF0dHIoJ2QnLCBkKTtcblx0XHRcdH0pO1xuXHRcdH07XG5cdH0pLmRpcmVjdGl2ZSgnbmdGaWxsJywgZnVuY3Rpb24gKCkge1xuXHRcdHJldHVybiBmdW5jdGlvbiAoc2NvcGUsIGVsZW0sIGF0dHJzKSB7XG5cdFx0XHRhdHRycy4kb2JzZXJ2ZSgnbmdGaWxsJywgZnVuY3Rpb24gKGZpbGwpIHtcblx0XHRcdFx0ZWxlbS5hdHRyKCdmaWxsJywgZmlsbCk7XG5cdFx0XHR9KTtcblx0XHR9O1xuXHR9KTtcbn0pKCk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
